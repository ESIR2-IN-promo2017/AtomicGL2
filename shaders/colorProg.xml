<?xml version="1.0" encoding="UTF-8"?>

<SHADER name="colorProg">
	<VERTEX>
		<ATTRIBUTES>
			attribute vec3 aVertexPosition;
			attribute vec3 aVertexColor;
		</ATTRIBUTES>

		<UNIFORMS>
			uniform mat4 uMVMatrix;
			uniform mat4 uPMatrix;
		</UNIFORMS>

		<VARYING>
		  	varying vec3 vColor;
		  	varying vec3 vPosition;
		</VARYING>

		<OUTPUT>
		    void main(void) {
		    	vColor = aVertexColor;

	    		vec4 position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
				vec3 vPosition = vec3(position)/position.w;
				gl_Position = position;
	    	}
		</OUTPUT>
	</VERTEX>

	<FRAGMENT>
		<PRECISION>
			#ifdef GL_ES
				precision highp float;
			#endif

			#define NB_POINTLIGHTS
			#define NB_SPOTLIGHTS
			#define NB_DIRECTIONNALLIGHTS

			struct pointLight{
				vec3 position;
				vec3 color;
				vec3 intensity;
			};

			struct spotLight{
				vec3 position;
				vec3 direction;
				vec3 color;
				float radius;
				vec3 intensity;
			};

			struct directionnalLight{
				vec3 direction;
				vec3 color;
				vec3 intensity;
			};
		</PRECISION>

		<UNIFORMS>
			uniform pointLight pointLights[NB_POINTLIGHTS];
			uniform spotLight spotLights[NB_SPOTLIGHTS];
			uniform directionnalLight directionnalLights[NB_DIRECTIONNALLIGHTS];
		</UNIFORMS>

		<VARYING>
			varying vec3 vColor;
		</VARYING>

		<OUTPUT>
			void main(void) {
				gl_FragColor = vec4(vColor, 1.0);
		    }
		</OUTPUT>
	</FRAGMENT>
</SHADER>
